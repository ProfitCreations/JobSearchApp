<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">
    <title>Dashboard Template for Bootstrap</title>
    <!-- Bootstrap core CSS -->
    <link href="./node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/custom.css" rel="stylesheet">
    <script src="./node_modules/jquery/dist/jquery.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg fixed-top ">
        <div class="container">
            <!-- <a class="navbar-brand" href="#">Navbar</a> -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarTogglerDemo02">
                <div class="form-inline my-2 my-lg-0">
                    <input id="jobTitle" type="text" class="form-control" placeholder="Job Title" value="frontend">
                    <!-- <input id="city" type="text" class="form-control" placeholder="City"> -->
                    <select id="locations" class="custom-select">
                        <option value="2">Açores</option>
                        <option value="1">Aveiro</option>
                        <option value="3">Beja</option>
                        <option value="4">Braga</option>
                        <option value="5">Bragança</option>
                        <option value="6">Castelo Branco</option>
                        <option value="8">Coimbra</option>
                        <option value="10">Évora</option>
                        <option value="9">Faro</option>
                        <option value="11">Guarda</option>
                        <option value="29">Internacional</option>
                        <option value="13">Leiria</option>
                        <option value="14">Lisboa</option>
                        <option value="15">Madeira</option>
                        <option value="12">Portalegre</option>
                        <option value="18">Porto</option>
                        <option value="20">Santarém</option>
                        <option value="17">Setúbal</option>
                        <option value="22">Viana do Castelo</option>
                        <option value="21">Vila Real</option>
                        <option value="16">Viseu</option>
                    </select>
                    <select class="custom-select">
                        <option selected>Full-time</option>
                        <option value="1">Part-time</option>
                    </select>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" id="remote" type="checkbox" name="remote" value=""> Remote
                        </label>
                    </div>
                    <button id="searchJob" class="btn btn-outline-success my-2 my-sm-0 col">Search</button>
                </div>
            </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-4 d-none d-sm-block bg-light sidebar">
                <ul id="results" class="nav nav-pills flex-column">
                    <!-- for test purposes -->
                    <!--   <li>
                        <div onclick=goWebview($(this).attr('link')) link="https://www.itjobs.pt/oferta/215390/developer" class="wb">
                            <h6> Em destaque Developer Bodum&nbsp;Porto&nbsp;Full-time</h6><img src="https://static.itjobs.pt/images/companies/4d/95d/3917/logo.png?btfc=1505136836" alt="">
                            <p>Bodum</p>
                            <p>Porto&nbsp;Full-time</p>
                            <p class="hidden">itjobs.pt</p>
                            <p></p>
                        </div>
                    </li> -->
                    <!-- ./for test purposes -->
                </ul>
            </nav>
            <main class="col-md-8 ml-sm-auto  pt-3" role="main">
                <div style=" height:480px">
                    <webview id="web" src="" style=" height:480px"></webview>
                </div>
            </main>
        </div>
    </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script> -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script> -->
    <script>
    window.$ = window.jQuery = require('./node_modules/jquery/dist/jquery.js');
    var web = $('#web');
    // $('.wb').each(function() { $(this).click(function() { goWebview($(this).attr('link')) }) });
    $.each($('.wb'), function() {
            $(this).click(function() {
                goWebview($(this).attr('link'))
            })
        }
    );
    function goWebview(url) {
        // var url = $(this).attr("link");
        console.log(url);
        web.attr('src', url);
    };

    // $(".wb").each(function(elem) {
    //     elem.addEventListener("click", function(event) {
    //         var webview = $('webview');
    //         webView.target[0].value = $(this).attr('link');
    //     });
    //     // elem.addEventListener('new-window', function(e) {
    //     //     webView.target[0].value = e.url;
    //     // });

    // });
    </script>
    <script>
    let cred = require('./credentials.json');
    document.getElementById("searchJob").addEventListener("click", function() {
        const locVal = document.getElementById('locations').value;
        const jobVal = document.getElementById('jobTitle').value;
        let loc = cred.loc = locVal;
        // document.getElementById("searchJob").innerHTML = "Searching...";
        document.getElementById("results").innerHTML = "";
        let remote = cred.remote = document.getElementById("remote").checked;

        console.log("remote -> ", remote);

        require('./search');
        // require('./puppet.js');
    })
    </script>
</body>

</html>